{"version":3,"sources":["shared/context/auth-context.js","shared/components/UIElements/LoadingSpinner.js","shared/components/UIElements/Backdrop/Backdrop.js","shared/hooks/auth-hook.js","shared/components/Navigation/MainHeader.js","shared/components/Navigation/SideDrawer.js","shared/components/Navigation/NavLinks.js","shared/components/Navigation/MainNavigation.js","App.js","index.js"],"names":["__webpack_require__","d","__webpack_exports__","AuthContext","react__WEBPACK_IMPORTED_MODULE_0__","createContext","isLoggedIn","userId","token","login","logout","react__WEBPACK_IMPORTED_MODULE_0___default","n","LoadingSpinner","props","a","createElement","className","concat","asOverlay","react_dom__WEBPACK_IMPORTED_MODULE_1__","react_dom__WEBPACK_IMPORTED_MODULE_1___default","Backdrop","ReactDOM","createPortal","onClick","document","getElementById","logoutTimer","MainHeader","react_default","children","SideDrawer","content","CSSTransition","in","show","timeout","classNames","mounOnEnter","unmountOnExit","NavLinks","auth","useContext","location","react_router_dom","to","exact","MainNavigation","_useState","useState","_useState2","Object","slicedToArray","drawerIsOpen","setDrawerIsOpen","closeDrawer","Fragment","components_Navigation_SideDrawer","components_Navigation_NavLinks","components_Navigation_MainHeader","Users","React","lazy","Promise","all","e","then","bind","NewPlace","UserPlaces","UpdatePlace","Auth","App","routes","_useAuth","setToken","_useState3","_useState4","tokenExpDate","setTokenExpDate","_useState5","_useState6","setUserId","useCallback","uid","expirationDate","tokenExpirationDate","Date","getTime","localStorage","setItem","JSON","stringify","expiration","toISOString","removeItem","useEffect","remainingTime","setTimeout","clearTimeout","storedData","parse","getItem","useAuth","react_router","path","element","auth_context","Provider","value","components_Navigation_MainNavigation","react","fallback","app","src_App_0","render"],"mappings":"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","file":"static/js/main.bd6eaace.chunk.js","sourcesContent":["import { createContext } from \"react\";\r\n\r\nexport const AuthContext = createContext({\r\n    isLoggedIn: false, \r\n    userId: null,\r\n    token: null,\r\n    login: () => {}, \r\n    logout: () => {}\r\n});\r\n","import React from 'react';\n\nimport './LoadingSpinner.css';\n\nconst LoadingSpinner = props => {\n  return (\n    <div className={`${props.asOverlay && 'loading-spinner__overlay'}`}>\n      <div className=\"lds-dual-ring\"></div>\n    </div>\n  );\n};\n\nexport default LoadingSpinner;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './Backdrop.css';\n\nconst Backdrop = props => {\n  return ReactDOM.createPortal(\n    <div className=\"backdrop\" onClick={props.onClick}></div>,\n    document.getElementById('backdrop-hook')\n  );\n};\n\nexport default Backdrop;\n","\r\nimport {useState, useCallback, useEffect} from 'react';\r\n\r\nlet logoutTimer;\r\n\r\nexport const useAuth = () => {\r\n    const [token, setToken] = useState(null);\r\n    const [tokenExpDate, setTokenExpDate] = useState();\r\n    const [userId, setUserId] = useState(false); \r\n  \r\n    const login = useCallback((uid, token, expirationDate) => {\r\n      setToken(token);\r\n      setUserId(uid);\r\n      const tokenExpirationDate = expirationDate || new Date(new Date().getTime() + 1000 * 60 * 60);\r\n      setTokenExpDate(tokenExpirationDate);\r\n      localStorage.setItem(\r\n        'userData',\r\n         JSON.stringify({\r\n           userId: uid, \r\n           token: token,\r\n           expiration: tokenExpirationDate.toISOString() }));\r\n    }, []);\r\n  \r\n    const logout = useCallback(() => {\r\n      setToken(null);\r\n      setTokenExpDate(null)\r\n      setUserId(null);\r\n      localStorage.removeItem('userData');\r\n    }, []);\r\n  \r\n    useEffect(() => {\r\n      if (token && tokenExpDate) {\r\n        const remainingTime = tokenExpDate.getTime() - new Date().getTime();\r\n        logoutTimer = setTimeout(logout, remainingTime);\r\n      } else {\r\n        clearTimeout(logoutTimer);\r\n      }\r\n    }, [token, logout, tokenExpDate]);\r\n  \r\n    useEffect(() => {\r\n      const storedData = JSON.parse(localStorage.getItem('userData'));\r\n      if (\r\n        storedData &&\r\n        storedData.token && \r\n        new Date(storedData.expiration) > new Date()) {\r\n        login(storedData.userId, storedData.token, new Date(storedData.expiration));\r\n      }\r\n    }, [login]);\r\n\r\n    return { token, login, logout, userId }\r\n}; ","import React from \"react\";\r\n\r\nimport './MainHeader.css';\r\n\r\nconst MainHeader = (props) => {\r\n    return ( \r\n        <header className=\"main-header\">\r\n            {props.children}\r\n        </header>\r\n     );\r\n}\r\n \r\nexport default MainHeader;","import React from \"react\";\r\nimport './SideDrawer.css';\r\nimport ReactDOM  from \"react-dom\";\r\nimport { CSSTransition} from 'react-transition-group';\r\n\r\nconst SideDrawer = props => {\r\n    const content = (\r\n      <CSSTransition \r\n        in={props.show} \r\n        timeout={200} \r\n        classNames=\"slide-in-left\" \r\n        mounOnEnter \r\n        unmountOnExit>\r\n       <aside className=\"side-drawer\" onClick={props.onClick}> {props.children}</aside>\r\n      </CSSTransition>\r\n    );\r\n\r\n    return ReactDOM.createPortal(content, document.getElementById('drawer-hook'))\r\n} \r\n \r\nexport default SideDrawer;","import React, {useContext} from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport './NavLinks.css'\r\nimport { AuthContext } from \"../../context/auth-context\";\r\n\r\nconst NavLinks = () => {\r\n    const auth = useContext(AuthContext);\r\n    const location = `/${auth.userId}/places`;\r\n\r\n    return <ul className=\"nav-links\">\r\n        <li>\r\n            <NavLink to='/' exact=\"true\" >ALL USERS</NavLink>\r\n        </li>\r\n        {auth.isLoggedIn && (<li>\r\n            <NavLink to={location} >MY PLACES</NavLink>\r\n        </li>)}\r\n        {auth.isLoggedIn && (<li>\r\n            <NavLink to='/places/new'>ADD PLACE</NavLink>\r\n        </li>)}\r\n        {!auth.isLoggedIn && (<li>\r\n            <NavLink to='/auth'>AUTHENTICATE</NavLink>\r\n        </li>)} \r\n        {auth.isLoggedIn && (\r\n            <button onClick={auth.logout}>LOGOUT</button>\r\n        )}\r\n    </ul>\r\n     \r\n}\r\n \r\nexport default NavLinks;","import React, {useState} from \"react\";\r\nimport MainHeader from \"./MainHeader\";\r\nimport {Link} from 'react-router-dom';\r\nimport SideDrawer from \"./SideDrawer\";\r\n\r\nimport './MainNavigation.css'\r\nimport NavLinks from \"./NavLinks\";\r\nimport Backdrop from \"../UIElements/Backdrop/Backdrop\";\r\n\r\nconst MainNavigation = (props) => {\r\n    const [drawerIsOpen, setDrawerIsOpen] = useState(false);\r\n\r\n    const openDrawer = () => {\r\n        setDrawerIsOpen(true);\r\n    };\r\n\r\n    const closeDrawer = () => {\r\n        setDrawerIsOpen(false);\r\n    };\r\n    return (\r\n        <React.Fragment>\r\n            {drawerIsOpen && <Backdrop onClick={closeDrawer} />}\r\n            <SideDrawer show={drawerIsOpen} onClick={closeDrawer}>\r\n            <nav className=\"main-navigation__drawer-nav\">\r\n                <NavLinks />\r\n            </nav>\r\n            </SideDrawer>\r\n        \r\n         \r\n          <MainHeader>\r\n            <button className=\"main-navigation__menu-btn\" onClick={openDrawer}>\r\n                <span />\r\n                <span />\r\n                <span />\r\n            </button>\r\n            <h1 className=\"main-navigation__title\">\r\n                <Link to='/' >Your Places </Link>\r\n            </h1>\r\n            <nav className=\"main-navigation__header-nav\">\r\n                <NavLinks />\r\n            </nav>\r\n          </MainHeader>\r\n        </React.Fragment>\r\n     );\r\n}\r\n \r\nexport default MainNavigation;","\r\nimport './App.css';\r\nimport { Routes, Route, Navigate } from 'react-router';\r\n// import Users from './user/pages/Users';\r\n// import Auth from './user/pages/Auth';\r\n\r\nimport { AuthContext } from './shared/context/auth-context';\r\nimport { useAuth } from './shared/hooks/auth-hook';\r\n\r\n// import NewPlace from './places/pages/NewPlaces';\r\nimport React, {Suspense} from 'react';\r\nimport MainNavigation from './shared/components/Navigation/MainNavigation';\r\nimport LoadingSpinner from './shared/components/UIElements/LoadingSpinner';\r\n// import UserPlaces from './places/pages/UserPlaces';\r\n// import UpdatePlace from './places/pages/UpdatePlace';\r\n\r\nconst Users = React.lazy(() => import('./user/pages/Users'));\r\nconst NewPlace = React.lazy(() => import('./places/pages/UserPlaces'));\r\nconst UserPlaces = React.lazy(() => import('./places/pages/UserPlaces'));\r\nconst UpdatePlace = React.lazy(() => import('./places/pages/UpdatePlace'));\r\nconst Auth = React.lazy(() => import('./user/pages/Auth'));\r\n\r\nconst App = () => {\r\n\r\n  const { token, login, logout, userId } = useAuth();\r\n  let routes;  \r\n  \r\n  if (token) {\r\n    routes=(\r\n      <React.Fragment>\r\n       <Route path=\"/\" \r\n          exact=\"true\"\r\n          element={<Users />}\r\n        /> \r\n        <Route path=\"/places/new\" \r\n          exact=\"true\"\r\n           element={<NewPlace />}\r\n        />\r\n        <Route path=\"/:userId/places\"\r\n          exact=\"true\"\r\n          element={\r\n          <UserPlaces />\r\n          }\r\n        />\r\n        <Route path=\"/places/:placeId\"\r\n          exact=\"true\"\r\n           element={<UpdatePlace />}\r\n        />\r\n        <Route path=\"*\"\r\n          exact=\"true\" \r\n          element={\r\n          <Navigate to=\"/\" />\r\n          }\r\n        />\r\n      </React.Fragment>\r\n    )\r\n  } else {\r\n    routes = (\r\n      <React.Fragment>\r\n      <Route path=\"/\" \r\n        exact=\"true\"\r\n        element={<Users />}\r\n      /> \r\n      <Route path=\"/:userId/places\"\r\n        exact=\"true\"\r\n        element={\r\n        <UserPlaces />\r\n        }\r\n      />\r\n      <Route path=\"/auth\"\r\n        exact=\"true\"\r\n        element={\r\n        <Auth />\r\n        }\r\n      />\r\n      <Route path=\"*\"\r\n        exact=\"true\" \r\n        element= {\r\n        <Navigate to=\"/auth\" />\r\n        }\r\n     />\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider \r\n      value={{\r\n        isLoggedIn: !!token, //The !! in from of token converts token to true if there's a value or data type\r\n        token: token,\r\n        userId: userId,\r\n        login: login,\r\n        logout: logout}}>\r\n    <MainNavigation />\r\n     <main>\r\n     <Suspense fallback={<div className='center'> <LoadingSpinner /> </div>}>\r\n       <Routes>\r\n            {routes}\r\n      </Routes>\r\n      </Suspense>\r\n     </main>\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\n\r\nconst app = (\r\n  <BrowserRouter>\r\n     <App />\r\n  </BrowserRouter>\r\n)\r\nReactDOM.render(\r\n  app,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}